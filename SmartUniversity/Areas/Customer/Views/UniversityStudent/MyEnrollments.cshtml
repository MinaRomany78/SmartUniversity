@model IEnumerable<Entities.ViewModel.EnrollmentVM>
@{
    ViewData["Title"] = "My Enrollments";
    var colors = new string[] { "#1a73e8", "#0f9d58", "#ea4335", "#9c27b0", "#009688", "#ff9800", "#5f6368" };
    int i = 0;
}

<link rel="stylesheet" href="~/css/enrollments.css" />

<div class="container-fluid enrollment-body">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-lg-2 col-md-3 sidebar p-0">
            <div class="sidebar-inner p-3">
                <h5 class="sidebar-title">Menu</h5>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">
                            <i class="bi bi-house-door"></i> Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-calendar-event"></i> Calendar
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link collapse-toggle" data-bs-toggle="collapse" href="#enrolledCourses" role="button">
                            <i class="bi bi-book"></i> Enrolled Courses
                        </a>
                        <ul class="collapse ps-3 list-unstyled" id="enrolledCourses">
                            @foreach (var course in Model)
                            {
                                <li class="nav-item">
                                    <a class="nav-link small" href="#">
                                        <i class="bi bi-dot"></i> @course.CourseName
                                    </a>
                                </li>
                            }
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-list-task"></i> Tasks
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-10 col-md-9 p-4">
            <h3 class="page-title">My Enrollments</h3>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                @foreach (var course in Model)
                {
                    var color = colors[i % colors.Length];
                    var teacherName = "Dr " + course.DoctorName;
                    var teacherInitial = teacherName.Split(' ')[1].Substring(0, 1);

                    <div class="col">
                        <div class="classroom-card">
                            <div class="classroom-card-header" style="background:@color;">
                                <h5 class="course-name">@course.CourseName</h5>
                            </div>
                            <div class="classroom-card-body p-3">
                                <!-- Doctor -->
                                <div class="teacher-section">
                                    <div class="teacher-avatar" style="background:@color;">@teacherInitial</div>
                                    <div class="teacher-info">
                                        <div class="teacher-label">Doctor</div>
                                        <div class="teacher-name">@teacherName</div>
                                    </div>
                                </div>

                                <!-- Assistants -->
                                <div class="assistant-badges">
                                    <div class="teacher-label">Assistants</div>
                                    @foreach (var item in course.Assistants)
                                    {
                                        <span class="badge">@item</span>
                                    }
                                </div>
                            </div>
                            <div class="card-actions">
                                <a class="action-btn"
                                   asp-action="Index"
                                   asp-controller="Comminty"
                                   asp-area="Customer"
                                   asp-route-courseId="@course.CourseId"
                                   asp-route-color="@color">
                                    <i class="bi bi-box-arrow-in-right"></i> Enter
                                </a>


                            </div>
                        </div>
                    </div>
                    i++;
                }
            </div>
        </div>
    </div>
</div>
